# Discord Bot Setup

## المشكلة
كان البوت يخرج من السيرفرات تلقائياً لأنه لم يكن هناك bot client يعمل باستمرار. المشروع كان يستخدم Discord API عبر REST calls فقط.

## الحل
تم إنشاء ملف `bot.js` منفصل يحتوي على Discord bot client يعمل باستمرار.

## المميزات الجديدة
- ✅ البوت يبقى متصل باستمرار
- ✅ رسائل ترحيب عند انضمام البوت لسيرفر جديد
- ✅ رد تلقائي على الرسائل
- ✅ معالجة الأخطاء وإعادة الاتصال
- ✅ تسجيل مفصل للأحداث

## كيفية التشغيل

### 1. تأكد من وجود DISCORD_BOT_TOKEN في .env.local
```env
DISCORD_BOT_TOKEN=your_bot_token_here
```

### 2. تشغيل البوت
```bash
# تشغيل البوت مرة واحدة
npm run bot

# أو تشغيل البوت مع إعادة التشغيل التلقائي (يتطلب nodemon)
npm run bot:dev
```

### 3. تشغيل البوت مع الموقع معاً

#### الطريقة الأولى: استخدام npm script
```bash
# تثبيت المكتبات المطلوبة أولاً
npm install

# تشغيل كلاهما معاً
npm run start:all
```

#### الطريقة الثانية: استخدام ملف batch (Windows)
```bash
# تشغيل الملف المجمع
start-all.bat
```

#### الطريقة الثالثة: تشغيل منفصل
```bash
# في terminal منفصل
npm run dev

# في terminal آخر
npm run bot
```

## الأحداث المدعومة
- **GuildCreate**: عند انضمام البوت لسيرفر جديد
- **GuildDelete**: عند إزالة البوت من سيرفر
- **MessageCreate**: للرد التلقائي على الرسائل
- **Error/Disconnect/Reconnecting**: معالجة الأخطاء

## التخصيص
يمكنك تعديل ملف `bot.js` لإضافة:
- المزيد من الردود التلقائية
- أوامر مخصصة
- معالجة أحداث أخرى
- تكامل مع قاعدة البيانات

## ملاحظات مهمة
- تأكد من أن البوت لديه الصلاحيات المطلوبة في Discord Developer Portal
- البوت يحتاج صلاحية "Send Messages" لإرسال رسائل الترحيب
- يمكن تشغيل البوت على خادم منفصل للحصول على أداء أفضل